unit Tutorial;

interface
uses  FMX.Objects, FMX.Graphics, FMX.Types;

var
    currentPage : Integer;

  procedure setTutorialLabels;
  procedure setImage(TargetRect : TRectangle; SourceImage : TBitmap);
  procedure backPage;
  procedure nextPage;




const
  tutorialPage1 =
  'The game board consists of square tiles arranged in a grid.' + sLineBreak + sLineBreak +
  'Two players face off against each other. Each player has multiple units, and ' +
  'the first to eliminate all of their enemies units wins the battle. ' + sLineBreak + sLineBreak +
  'The human players units are surrounded by a blue circle, and the enemies units have a red circle.';

  tutorialPage2 =
  'A typical unit is shown above. ' +
  'Once a unit uses all its attacks, its turn is over and cannot continue to move. ' + sLineBreak + sLineBreak +
  'Select a unit by clicking on it. When a unit is selected, its possible moves are ' +
  'shown by small blue circles, and its attack range is shown by red squares.';

  tutorialPage3 = 'There are 3 types of units: ';
  tutorialSword = 'The Soldier is tough, slow, and can only attack when adjacent to an enemy.';
  tutorialArcher = 'The Archer is fragile and slow, but can shoot at range.';
  tutorialCavalry = 'The Cavalry is quick, fragile, and has a charge that deals damage ' +
                    'based on straight line distance before reaching the target.';

implementation
uses Main;

  procedure setTutorialLabels;
  begin
    MainForm.lTutorialPage1.Text := tutorialPage1;
    MainForm.lTutorialPage2.Text := tutorialPage2;
    MainForm.lTutorialPage3.Text := tutorialPage3;

    setImage(MainForm.rectTutSword, MainForm.ImageSword.Bitmap);
    MainForm.lTutSword.Text := tutorialSword;
    setImage(MainForm.rectTutArcher, MainForm.ImageArcher.Bitmap);
    MainForm.lTutArcher.Text := tutorialArcher;
    setImage(MainForm.rectTutCavalry, MainForm.ImageCavalry.Bitmap);
    MainForm.lTuTCavalry.Text := tutorialCavalry;

    currentPage := 1;
  end;

  procedure setImage(TargetRect : TRectangle; SourceImage : TBitmap);
  var
    Image : TImage;
  begin
    Image := TImage.Create(TargetRect);
    Image.Parent := TargetRect;
    Image.Align  := TAlignLayout.Contents;
    Image.Visible:= True;
    Image.Bitmap.Assign(SourceImage);
  end;

  procedure backPage;
  begin
    if currentPage = 1 then
    begin
      MainForm.menuTutorial.Visible := False;
      MainForm.menuMain.Visible := True;
    end
    else
    if currentPage = 2 then
    begin
      MainForm.rectTutorialPage2.Visible := False;
      MainForm.rectTutorialPage1.Visible := True;

      currentPage := 1;
    end
    else
    if currentPage = 3 then
    begin
      MainForm.rectTutorialPage3.Visible := False;
      MainForm.rectTutorialPage2.Visible := True;

      currentPage := 2;
    end;
  end;

  procedure nextPage;
  begin
    if currentPage = 1 then
    begin
      MainForm.rectTutorialPage1.Visible := False;
      MainForm.rectTutorialPage2.Visible := True;

      currentPage := 2;
    end
    else
    if currentPage = 2 then
    begin
      MainForm.rectTutorialPage2.Visible := False;
      MainForm.rectTutorialPage3.Visible := True;

      currentPAge := 3;
    end;
  end;

end.
